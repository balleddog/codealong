name: codealong
version: "1.0"
author: Gordon L. Hempton <ghempton@gmail.com>
about: Open source development metrics
args:
  - output_mode:
      long: output-mode
      help: how to display terminal output
      default_value: progress
      possible_values:
        - progress
        - log
        - none
  - verbosity:
      long: verbosity
      default_value: info
      help: the verbosity of the output; only relevant when output-mode is log
      possible_values:
        - trace
        - debug
        - info
        - warning
        - error
        - critical
  - log_file:
      long: log-file
      help: the location of the log file
      default_value: codealong.log
  - log_level:
      long: log-level
      help: the verbosity of logging
      default_value: info
      possible_values:
        - trace
        - debug
        - info
        - warning
        - error
        - critical
subcommands:
  - init:
      about: generate a codealong config
      args:
        - github_org:
            short: o
            long: github-org
            help: name of Github organization from which to read users
            multiple: true
        - destination:
            help: the target directory
            default_value: "."
  - analyze:
      about: analyze and index events
      args:
        - elasticsearch_url:
            short: e
            long: elasticsearch-url
            help: url of elasticsearch instance to index into
            default_value: "http://localhost:9200"
        - config_path:
            short: c
            long: config-path
            help: path to a codealong config file
            multiple: true
        - repo_path:
            short: p
            long: repo-path
            help: path to a repo to analyze
            multiple: true
        - repo_url:
            short: u
            long: repo-url
            help: URL of a repo to analyze
            multiple: true
        - github_org:
            short: o
            long: github-org
            help: name of Github organization from which to pull all repositories
            multiple: true
        - concurrency:
            short: C
            long: concurrency
            help: the number of concurrent worker threads
            default_value: "6"
        - skip_forks:
            long: skip-forks
            help: don't include repositories which are forks
        - skip_commits:
            long: skip-commits
            help: don't analyze commits
        - skip_pull_requests:
            long: skip-pull-requests
            help: don't analyze pull requests
        - skip_unknown_authors:
            long: skip-unknown-authors
            help: don't analyze commits/PRs from authors not present in the config
        - skip_unknown_authors_in_forks:
            long: skip-unknown-authors-in-forks
            help: don't analyze commits/PRs from authors not present in the config when analyzing forked repos
